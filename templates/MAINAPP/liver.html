{%  extends 'MAINAPP/home.html' %}
{% load static %}
{% block content %}
<div class="bground1">

  <div class="container" style="margin-left:auto;margin-right:auto;padding:0% 6% 6% 6%">
    <br>
    <p style="text-align:right;"><a  href="{% url 'report'  %}" style="font-size:13px;font-weight:400;font-family: 'Roboto', sans-serif;">Báo cáo vấn đề <i class="bi bi-chevron-right"></i></a></p>
    <br>

          <!-- <p  style="font-size:20px;font-weight:500;font-family: 'Roboto', sans-serif;text-align :center;margin:0px;" >Liver Diagnosis</p> -->
        <p  style="font-size:35px;font-weight:500;font-family: 'Roboto', sans-serif;text-align :center;"  >Công cụ chẩn đoán bệnh gan</p>
        <!-- <p class="col-lg-5"style="margin-left:auto;margin-right:auto;text-align:center;font-size:14px;font-weight:400;font-family: 'Roboto', sans-serif;">Developed with the powerful Gradient boosting Algorithm with an accuracy of 84%.  </p> -->
        <br>


    <div class="row" data-aos="fade-zoom-in" data-aos-duration="3000">
      <div class="col-lg-6 col-md-12 col-sm-12 col-12" style="display:flex;flex-wrap:wrap;padding:15px;">
        <p style="font-size:13px;color:#626567 ;font-weight:400;">Các bệnh về gan được gây ra bởi các loại virus, chẳng hạn như viêm gan A, viêm gan B và viêm gan C. Ước tính có 354 triệu người trên toàn thế giới sống với viêm gan B hoặc C, và đối với hầu hết họ, việc kiểm tra và điều trị vẫn còn nằm ngoài tầm tay.</p>
    </div>
          <div class="col-lg-3 col-md-6 col-sm-6 col-6"style="padding:15px;margin-left:auto;margin-right:auto;display:flex;flex-wrap:wrap;">
            <div style="width:100%;border:1px solid #CACFD2;border-radius:15px;padding:10px;">
              <p style="text-align:center;font-size:24px;color:#626567;;margin:0px;font-weight:700;padding:16px;border-radius:100px;border:3px solid #626567;;margin-right:auto;margin-left:auto;width:80px;height:80px;">84</p>
              <p class=""style="text-align:center;font-size:12px;color:#626567;;font-weight:400;margin:5px;">% Độ chính xác</p>
            </div>
          </div>
          <div class="col-lg-3 col-md-6 col-sm-6 col-6"style="padding:15px;margin-left:auto;margin-right:auto;display:flex;flex-wrap:wrap;">
            <div style="width:100%;border-radius:15px;padding:10px;background:#183FFF ;">
              <p style="text-align:center;font-size:30px;color:white;margin:0px;font-weight:700;padding:16px;border-radius:100px;border:3px solid white;margin-right:auto;margin-left:auto;width:80px;height:80px;"><i class="bi bi-envelope"></i></p>
              <p style="text-align:center;font-size:12px;color:white;font-weight:400;margin:5px;">Kết quả chấn đoán sẽ được gửi về mail</p>
            </div>
          </div>
    </div>
    <br>
        <div class="row">
          <div class="col-lg-6 col-md-12 col-sm-12 col-12" style="margin-left:auto;margin-right:auto;margin-bottom:20px;">
           <div class="" style="border: 1px solid #CACFD2;border-radius:15px;padding:20px;background:white;">
            <p style="text-align:center;font-size:12px;color:#626567;">Những kết quả này chỉ nhằm mục đích cung cấp thông tin nhanh chóng. Hãy tham khảo ý kiến của cơ quan y tế để được tư vấn.</p>


            <form method="post" enctype="multipart/form-data" action ="{% url 'liver_diagnosis_result' %}">
            {% csrf_token %}
            <input type="number" step="any" class="form-control"name="val1" placeholder="Tuổi"
              style=" background:#E5E7E9;border:0px;border-radius:50px;padding:20px;font-size:13px;color:black;margin-bottom:12px;" required>

              <label for="val2" style="font-size:14px;color:black;font-weight:700;margin:4px;margin-top:13px;">Giới tính</label>
              <div class="form-check" style="padding-left:30px;">
              <input class="form-check-input" value="1" type="radio" name="val2" id="Male"checked >
              <label style="font-size:14px;font-weight:400;"class="form-check-label"  for="Male">Nam</label>
              <br>
              <input class="form-check-input" value="0" type="radio" name="val2" id="Female" >
              <label style="font-size:14px;font-weight:400;" class="form-check-label" for="Female">Nữ</label>
              </div>
              <br>

            <input type="number" step="any" class="form-control"name="val3" placeholder="Tổng lượng bilirubin trong máu"
              style=" background:#E5E7E9;border:0px;border-radius:50px;padding:20px;font-size:13px;color:black;margin-bottom:12px;" required>
            <input type="number" step="any" class="form-control"name="val4" placeholder="Lượng bilirubin trực tiếp trong máu"
              style=" background:#E5E7E9;border:0px;border-radius:50px;padding:20px;font-size:13px;color:black;margin-bottom:12px;" required>
            <input type="number" step="any" class="form-control"name="val5" placeholder="Alkaline Phosphatase (enzym phosphatase kiềm trong máu)"
              style=" background:#E5E7E9;border:0px;border-radius:50px;padding:20px;font-size:13px;color:black;margin-bottom:12px;" required>
            <input type="number" step="any" class="form-control"name="val6" placeholder="Alamine Aminotransferase (chỉ số men gan đánh giá tính trạng tổn thương gan)"
              style=" background:#E5E7E9;border:0px;border-radius:50px;padding:20px;font-size:13px;color:black;margin-bottom:12px;" required>
            <input type="number" step="any" class="form-control"name="val7" placeholder="Aspartate Aminotransferase (chỉ số men phản ánh tình trạng tổn thương tế bào gan)"
              style=" background:#E5E7E9;border:0px;border-radius:50px;padding:20px;font-size:13px;color:black;margin-bottom:12px;" required>
            <input type="number" step="any" class="form-control"name="val8" placeholder="Tổng lượng protein trong máu"
              style=" background:#E5E7E9;border:0px;border-radius:50px;padding:20px;font-size:13px;color:black;margin-bottom:12px;" required>
            <input type="number" step="any" class="form-control"name="val9" placeholder="Albumin"
              style=" background:#E5E7E9;border:0px;border-radius:50px;padding:20px;font-size:13px;color:black;margin-bottom:12px;" required>
            <input type="number" step="any" class="form-control"name="val10" placeholder="Tỉ lệ Albumin/Globulin"
              style=" background: #E5E7E9;border:0px;border-radius:50px;padding:20px;font-size:13px;color:black;margin-bottom:12px;" required>
            <br>
        <div class="text-center">
         <button type="submit" value="Submit" class="btn btn-outline-primary" style="border-radius:50px;border-width:2px;font-weight:600;"> Xem kết quả <i class="bi bi-chevron-double-right"></i></button>
        </div>
        </form>
          </div>
        </div>
          <div class="col-lg-6 col-md-12 col-sm-12 col-12" style="margin-left:auto;margin-right:auto;">
            <div class="" style="padding:30px;background-color:black;border-radius:15px;">
            {% if output1 or output2 or output1 == 0 %}
            <div style="margin-left:auto;margin-right:auto;margin-bottom:15px;background:rgba(255,255,255,0.02);">
                <table class="table table-striped table-borderless  table-sm table-dark" style="background:transparent;">
                  <thead><tr><td scope="row"> </td><td style="font-size:14px;font-weight:600;">Chỉ số</td><td  style="font-size:14px;font-weight:600;">Đầu vào</td></tr></thead>
                <tbody>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">1</td><td style="font-size:12px;color:#E5E8E8">Tuổi</td><td style="font-size:12px;color:white;font-weight:600;">{{Age}}</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">2</td><td style="font-size:12px;color:#E5E8E8">Giới tính</td><td style="font-size:12px;color:white;font-weight:600;">{{GenderText}}</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">3</td><td style="font-size:12px;color:#E5E8E8">Tổng lượng Bilirubin trong máu </td><td style="font-size:12px;color:white;font-weight:600;">{{TBIL}}</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">4</td><td style="font-size:12px;color:#E5E8E8">Lượng Bilirubin trực tiếp trong máu </td><td style="font-size:12px;color:white;font-weight:600;">{{DBIL}}</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">5</td><td style="font-size:12px;color:#E5E8E8">Alkaline Phosphotase</td><td style="font-size:12px;color:white;font-weight:600;">{{ALKP}}</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">6</td><td style="font-size:12px;color:#E5E8E8">Alamine Aminotransferase</td><td style="font-size:12px;color:white;font-weight:600;">{{Alamine}}</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">7</td><td style="font-size:12px;color:#E5E8E8">Aspartate Aminotransferase </td><td style="font-size:12px;color:white;font-weight:600;">{{Aspartate}}</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">8</td><td style="font-size:12px;color:#E5E8E8">Tổng lượng Protiens trong máu</td><td style="font-size:12px;color:white;font-weight:600;">{{Protiens}}</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">9</td><td style="font-size:12px;color:#E5E8E8">Albumin</td><td style="font-size:12px;color:white;font-weight:600;">{{Albumin}}</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">10</td><td style="font-size:12px;color:#E5E8E8">Tỉ lệ Albumin/Globulin</td><td style="font-size:12px;color:white;font-weight:600;">{{AGR}}</td></tr>
                </tbody>
              </table>
            </div>
             <div class="col-lg-12 col-md-12 col-sm-12 col-12" style="margin-left:auto;margin-right:auto;margin-bottom:15px;padding:13px;border-radius:10px;background: white"">
                <p style="color:black;font-size:16px;text-align:center;font-weight:600;><i class="fa fa-heartbeat" aria-hidden="true"></i> Kết quả</p>
                <hr>
                {% if output1 > 80 %}
                <p style="margin:0px;color:black;font-size:14px;font-weight:700;">Rủi ro <label style="margin:0px;color:#ff0000;" >&nbsp;&nbsp;{{ output1 }} %</label></p>
                {% if output2 < 1 %}
                <p style="margin:0px;color:#ff0000;font-weight:700;font-size:14px;">Khả năng mắc bệnh gan thấp</p>
                {% else %}
                <br>
                <p style="margin:0px;color:#ff0000;font-weight:700;font-size:14px;">Nguy cơ mắc bệnh gan cao, hãy tham khảo ý kiến của cơ quan y tế để được tư vấn.</p>
                {% endif %}

                {% elif output1 > 60 %}
                <p style="margin:0px;color:black;font-size:14px;font-weight:700;">Rủi ro <label style="margin:0px;color:#c26629;" >&nbsp;&nbsp;{{ output1 }} %</label></p>
                {% if output2 < 1 %}
                <p style="margin:0px;color:#c26629;font-weight:700;font-size:14px;">Khả năng mắc bệnh gan thấp</p>
                {% else %}
                <br>
                <p style="margin:0px;color:#c26629;font-weight:700;font-size:14px;">Nguy cơ mắc bệnh gan cao, hãy tham khảo ý kiến của cơ quan y tế để được tư vấn.</p>
                {% endif %}

                {% elif output1 > 40 %}
                <p style="margin:0px;color:black;font-size:14px;font-weight:700;">Rủi ro <label style="margin:0px;color:#cccc00;" >&nbsp;&nbsp;{{ output1 }} %</label></p>
                {% if output2 < 1 %}
                <p style="margin:0px;color:#cccc00;font-weight:700;font-size:14px;">Khả năng mắc bệnh gan thấp</p>
                {% else %}
                <br>
                <p style="margin:0px;color:#cccc00;font-weight:700;font-size:14px;">Nguy cơ mắc bệnh gan cao, hãy tham khảo ý kiến của cơ quan y tế để được tư vấn.</p>
                {% endif %}

                {% elif output1 > 20 %}
                <p style="margin:0px;color:black;font-size:14px;font-weight:700;">Rủi ro <label style="margin:0px;color:#9ca642;" >&nbsp;&nbsp;{{ output1 }} %</label></p>
                {% if output2 < 1 %}
                <p style="margin:0px;color:#9ca642;font-weight:700;font-size:14px;">Khả năng mắc bệnh gan thấp</p>
                {% else %}
                <br>
                <p style="margin:0px;color:#9ca642;font-weight:700;font-size:14px;">Nguy cơ mắc bệnh gan cao, hãy tham khảo ý kiến của cơ quan y tế để được tư vấn.</p>
                {% endif %}

                {% else %}
                <p style="margin:0px;color:black;font-size:14px;font-weight:700;">Rủi ro <label style="margin:0px;color:#66ff66;" >&nbsp;&nbsp;{{ output1 }} %</label></p>
                {% if output2 < 1 %}
                <p style="margin:0px;color:#66ff66;font-weight:700;font-size:14px;">Khả năng mắc bệnh gan thấp</p>
                {% else %}
                <br>
                <p style="margin:0px;color:#66ff66;font-weight:700;font-size:14px;">Nguy cơ mắc bệnh gan cao, hãy tham khảo ý kiến của cơ quan y tế để được tư vấn.</p>
                {% endif %}
                {% endif %}
                <div class="text-center">
                  <br><br>
                  <a class="btn btn-outline-primary" href="{% url 'liver_diagnosis'%}" style="border-radius:30px;border-width:1px;font-size:13px;margin:auto;font-weight:600;margin-bottom:20px;">Chẩn đoán mới <i class="bi bi-chevron-double-right"></i></a>
                </div>

            </div>

            {% else %}
            <div style="margin-left:auto;margin-right:auto;margin-bottom:15px;background:rgba(255,255,255,0.02);">
                <table class="table table-striped table-borderless  table-sm table-dark" style="background:transparent;">
                  <thead><tr><td scope="row"> </td><td style="font-size:14px;font-weight:600;">Chỉ số</td><td  style="font-size:14px;font-weight:600;">Đầu vào</td></tr></thead>
                <tbody>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">1</td><td style="font-size:12px;color:#E5E8E8">Tuổi</td><td style="font-size:12px;color:white;font-weight:600;">NA</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">2</td><td style="font-size:12px;color:#E5E8E8">Giới tính</td><td style="font-size:12px;color:white;font-weight:600;">NA</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">3</td><td style="font-size:12px;color:#E5E8E8">Tổng lượng Bilirubin trong máu </td><td style="font-size:12px;color:white;font-weight:600;">NA</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">4</td><td style="font-size:12px;color:#E5E8E8">Lượng Bilirubin trực tiếp trong máu </td><td style="font-size:12px;color:white;font-weight:600;">NA</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">5</td><td style="font-size:12px;color:#E5E8E8">Alkaline Phosphotase</td><td style="font-size:12px;color:white;font-weight:600;">NA</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">6</td><td style="font-size:12px;color:#E5E8E8">Alamine Aminotransferase</td><td style="font-size:12px;color:white;font-weight:600;">NA</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">7</td><td style="font-size:12px;color:#E5E8E8">Aspartate Aminotransferase </td><td style="font-size:12px;color:white;font-weight:600;">NA</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">8</td><td style="font-size:12px;color:#E5E8E8">Tổng lượng protein trong máu</td><td style="font-size:12px;color:white;font-weight:600;">NA</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">9</td><td style="font-size:12px;color:#E5E8E8">Albumin</td><td style="font-size:12px;color:white;font-weight:600;">NA</td></tr>
                  <tr><td scope="row"style="font-size:12px;color:#E5E8E8">10</td><td style="font-size:12px;color:#E5E8E8">Tỉ lệ Albumin/Globulin</td><td style="font-size:12px;color:white;font-weight:600;">NA</td></tr>
                </tbody>
              </table>
            </div>
             <div class="col-lg-12 col-md-12 col-sm-12 col-12" style="margin-left:auto;margin-right:auto;margin-bottom:15px;padding:13px;border-radius:10px;background: white"">
                <p style="color:black;font-size:16px;text-align:center;font-weight:600;><i class="fa fa-heartbeat" aria-hidden="true"></i> Kết quả</p>
                <hr>
                <p style="text-align:center;color:grey;font-size:12px;">Chưa có kết quả chẩn đoán nào</p>
            </div>
            {% endif %}
            </div>
            <!-- <div class="text-center" style="padding:40px;">
              <p  style="text-align:center;padding:0px;font-size:13px;color:gray;font-weight:400;font-family: 'Roboto', sans-serif;">Your feedback is important and it help us to improve our features, please share your experience with us. </p>
              <a class="btn btn-outline-primary" href="{% url 'rating' %}"style="border-radius:30px;border-width:1px;font-size:13px;margin:auto;font-weight:400;padding:4px 8px 4px 8px">Rate Us <i class="bi bi-chevron-double-right"></i></a>
            </div> -->
          </div>
        </div>


    </div>
  </div>

{% endblock content %}
